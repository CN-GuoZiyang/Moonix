- [ ] 完成项目整体概述文档
- [ ] 修整已经写完的文档部分，绘制一些辅助图片
- [ ] 统一文件读写与文件夹相关的系统调用
- [ ] 尝试加载可执行文件时重定位全局变量
- [x] 修正第一章节的 bug


# 20210224 by guojun

- [x] 用Markdown整理一个全局目录，这样大体上干什么，逻辑更清楚，如下所示，弄完的打对勾就行，要完成的就放在那，尽量先把目录补充完整
- [x] SBI接口简介，从如何启动写起，是什么？为什么？如何用？
- [x] 增加一些调试的内容，如GDB简介，网上很多，可以举一个简单例子，进行调试举例，就像你写公众号文章一样
- [ ] **[RISC-V Assembly Interpreter](https://www.cs.cornell.edu/courses/cs3410/2019sp/riscv/interpreter/#)**
这个网址可视化的很好，可以手写汇编语句，实时编译，有点在线bochs的感觉
- [ ] RISC-V 手册，包云刚版，第2，3，9，10章，看看哪些，是你编程时，必须的知识，可加进来一些
- [ ] 图片和表格后期我会用Latex统一处理，你现在就是把内容都先填上
  - [ ] 图片出现的地方，你可以直接先截图放上，然后把图片的出处标上，如xx手册，图 4-13等
  - [ ] 表格跟图片一样，你可以直接先截图放上，然后把表格的出处标上，如xx手册，Table 2-11等
- [ ] 你这里实现已经有几章了，把你整体的设计，画一个总的框架图，先用visio画就行，主要体现出来各个章节的逻辑关系，如启动、进程管理，内存管理，文件管理，I\O等，然后每一部分大概做了什么，自己设计一下，目的就是让读者快速了解整个框架涵盖的内容


# 20210311 by guojun

# 前置知识
写的可以
- [ ] gdb
  gdb 如何查看这些特殊的寄存器，stvec sstatus，可以在后面的第一二章增加一小节如何用GDB调试，并查看这些特殊寄存器，来辅助理解一些概念
- [ ] 体系结构里面把寄存器介绍，中断机制等介绍一下，有个总体印象

# 第一章
- [ ] 1.1 内核入口点
  - [ ] entry.S 上来的写法有点突兀，没有基础的乍一看就蒙了，之前可以简单介绍一下汇编一般是如何书写和布局的
  - [ ] 这里能不能画一个entry.S内存分布图，主要是初学者不会知道你现在的汇编程序是怎么占用空间的
  - [ ] risc-v初始启动时，内存大致是怎么分配的，0x80200000大致在什么位置，同时引出个问题，怎么把汇编代码编译完的结果放到指定的0x80200000，埋下一个伏笔
- [ ] 1.3 设置交叉编译工具链
  - [ ] gcc 编译选项那里6行CFLAGS的注释加一下，这些选项的作用是什么 
- [ ] 1.4 封装 SBI 接口
  - [ ] ecall scall 写法统一，我看有的文档都是大写的
  - [ ] 实现 printf，以下的 printf() 实现来自于 xv6，xv6给出引用的超链接

# 第二章

- [ ] 2.2 配置中断处理程序
  - [ ] kernel/interrupt.c 代码缩进对齐
  - [ ] Interrupt cause: 0x0000000000000003 查手册62页 表4.2 2–3 Reserved for future standard use，可以扩展写一点，这样读者会有更好的体验感
  - [ ] epc: 0x0000000080200522 如果这里大概能让读者看到内存的分布状况更好，大致能理解522是怎么来的，因为现在代码还不多，有个打印字符的程序，和中断程序
- [ ] 2.2 函数对齐
  - [ ] 我们在上一节提到 stvec 时说过，RISC-V 要求中断处理程序的入口需要四字节对齐。因为 stvec 寄存器的低两位被 MODE 占据了。如果中断处理程序的入口没有对齐，如 0x80200522，在存入 stvec 时低两位就会被舍去，中断处理是就会跳转到 0x80200520 处去！这个地址甚至可能不是一个完整指令的起始地址，CPU 无法解析残缺的指令，就会陷入错误，导致重启。这里的重启原因，可以深入跟踪一下，我上课时，给你们讲过，如何重启的过程，里面是不停地跳转到非法代码，然后响应异常中断，你这里为什么会有3行***** Init Interrupt *****，而却没有Interrupt cause: epc Interrupt handled!等字样，解释的没有那么透彻，可以补充一下
- [ ] 2.3 中断上下文
  - [ ] 这里如果特权级发生变化，栈的处理是怎么进行的，应该把思想介绍一下，像x86，特权级变化伴随栈切换，两个栈顶什么时候设置的，切换的时候，谁的值被赋给栈顶寄存器了
  - [ ] 这里最好能画一个草图，就是把中断前后，如何保存相应通用寄存器，状态寄存器，控制寄存器等画出来，示意图就好，还有跟栈的关系，这些就是最起码的操作，但是硬件提供的机制，x86与riscv就是不同的处理方式，懂得人看你现在写的大致能懂，如果初学者看到这就会有点懵。此外，这里面关于栈的寄存器有哪些？应该在哪个位置介绍一下
- [ ] 2.4 设置时钟中断处理流程
  - [ ] case 5L | (1L << 63):
        supervisorTimer();
        break;  
        5是时钟中断，1L << 63 是什么？